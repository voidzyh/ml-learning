#!/usr/bin/env python3
"""
NumPy 100 é¢˜ â€” ç¬¬ 1-20 é¢˜
æ¥æº: github.com/rougier/numpy-100
é‡ç‚¹: æ•°ç»„åˆ›å»º / ç´¢å¼• / åˆ‡ç‰‡ / reshape

ä½¿ç”¨æ–¹å¼ï¼š
  1. å…ˆè‡ªå·±å°è¯•å†™æ¯é“é¢˜çš„ä»£ç 
  2. å¡ä½äº†çœ‹æç¤ºï¼ˆhintï¼‰
  3. æœ€åå¯¹ç…§å‚è€ƒç­”æ¡ˆ

ä»Šæ—¥ç›®æ ‡ï¼šå®Œæˆå…¨éƒ¨ 20 é¢˜ï¼Œç†è§£ NumPy æ•°ç»„çš„åŸºæœ¬æ“ä½œ
"""

import numpy as np

# ============================================================
# Q1. å¯¼å…¥ numpy å¹¶æŸ¥çœ‹ç‰ˆæœ¬ (â˜…â˜†â˜†)
# ============================================================
# æç¤º: np.__version__

print(f"Q1: NumPy ç‰ˆæœ¬ = {np.__version__}")


# ============================================================
# Q2. åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º 10 çš„å…¨é›¶å‘é‡ (â˜…â˜†â˜†)
# ============================================================
# æç¤º: np.zeros()
# ä½ çš„ä»£ç  â†“

z = np.zeros(10)
print(f"Q2: {z}")


# ============================================================
# Q3. æŸ¥çœ‹æ•°ç»„å ç”¨çš„å†…å­˜å¤§å° (â˜…â˜†â˜†)
# ============================================================
# æç¤º: .size å’Œ .itemsize
# ä½ çš„ä»£ç  â†“

z = np.zeros((10, 10))
print(f"Q3: {z.size * z.itemsize} bytes")


# ============================================================
# Q4. æŸ¥çœ‹ np.add çš„æ–‡æ¡£ (â˜…â˜†â˜†)
# ============================================================
# æç¤º: np.info() æˆ– help()
# å–æ¶ˆæ³¨é‡Šè¿è¡Œ:
# np.info(np.add)


# ============================================================
# Q5. åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º 10 çš„å…¨é›¶å‘é‡ï¼Œä½†ç¬¬5ä¸ªå…ƒç´ ä¸º1 (â˜…â˜†â˜†)
# ============================================================
# æç¤º: å…ˆåˆ›å»ºå…¨é›¶ï¼Œå†ç”¨ç´¢å¼•èµ‹å€¼
# ä½ çš„ä»£ç  â†“

z = np.zeros(10)
z[4] = 1  # æ³¨æ„ï¼šç´¢å¼•ä»0å¼€å§‹ï¼Œç¬¬5ä¸ªå…ƒç´ æ˜¯ index 4
print(f"Q5: {z}")


# ============================================================
# Q6. åˆ›å»ºä¸€ä¸ªå€¼ä» 10 åˆ° 49 çš„å‘é‡ (â˜…â˜†â˜†)
# ============================================================
# æç¤º: np.arange()
# ä½ çš„ä»£ç  â†“

z = np.arange(10, 50)
print(f"Q6: {z}")


# ============================================================
# Q7. åè½¬ä¸€ä¸ªå‘é‡ï¼ˆç¬¬ä¸€ä¸ªå…ƒç´ å˜æˆæœ€åä¸€ä¸ªï¼‰(â˜…â˜†â˜†)
# ============================================================
# æç¤º: åˆ‡ç‰‡æ­¥é•¿ [::-1]
# ä½ çš„ä»£ç  â†“

z = np.arange(50)
z = z[::-1]
print(f"Q7: {z[:10]}...")  # åªæ˜¾ç¤ºå‰10ä¸ª


# ============================================================
# Q8. åˆ›å»ºä¸€ä¸ª 3x3 çš„çŸ©é˜µï¼Œå€¼ä» 0 åˆ° 8 (â˜…â˜†â˜†)
# ============================================================
# æç¤º: np.arange() + .reshape()
# ä½ çš„ä»£ç  â†“

z = np.arange(9).reshape(3, 3)
print(f"Q8:\n{z}")


# ============================================================
# Q9. æ‰¾å‡ºæ•°ç»„ [1,2,0,0,4,0] ä¸­éé›¶å…ƒç´ çš„ç´¢å¼• (â˜…â˜†â˜†)
# ============================================================
# æç¤º: np.nonzero()
# ä½ çš„ä»£ç  â†“

nz = np.nonzero([1, 2, 0, 0, 4, 0])
print(f"Q9: éé›¶ç´¢å¼• = {nz}")


# ============================================================
# Q10. åˆ›å»ºä¸€ä¸ª 3x3 çš„å•ä½çŸ©é˜µ (â˜…â˜†â˜†)
# ============================================================
# æç¤º: np.eye()
# ä½ çš„ä»£ç  â†“

z = np.eye(3)
print(f"Q10:\n{z}")


# ============================================================
# Q11. åˆ›å»ºä¸€ä¸ª 3x3x3 çš„éšæœºæ•°ç»„ (â˜…â˜†â˜†)
# ============================================================
# æç¤º: np.random.random()
# ä½ çš„ä»£ç  â†“

z = np.random.random((3, 3, 3))
print(f"Q11: shape={z.shape}, ç¤ºä¾‹å€¼={z[0,0,:]}")


# ============================================================
# Q12. åˆ›å»ºä¸€ä¸ª 10x10 çš„éšæœºæ•°ç»„ï¼Œæ‰¾å‡ºæœ€å¤§å€¼å’Œæœ€å°å€¼ (â˜…â˜†â˜†)
# ============================================================
# æç¤º: .min() å’Œ .max()
# ä½ çš„ä»£ç  â†“

z = np.random.random((10, 10))
print(f"Q12: min={z.min():.4f}, max={z.max():.4f}")


# ============================================================
# Q13. åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º 30 çš„éšæœºå‘é‡ï¼Œæ±‚å¹³å‡å€¼ (â˜…â˜†â˜†)
# ============================================================
# æç¤º: .mean()
# ä½ çš„ä»£ç  â†“

z = np.random.random(30)
print(f"Q13: mean={z.mean():.4f}")


# ============================================================
# Q14. åˆ›å»ºä¸€ä¸ªè¾¹æ¡†ä¸º 1ã€å†…éƒ¨ä¸º 0 çš„äºŒç»´æ•°ç»„ (â˜…â˜†â˜†)
# ============================================================
# æç¤º: å…ˆå…¨1ï¼Œå†ç”¨åˆ‡ç‰‡æŠŠå†…éƒ¨è®¾ä¸º0
# ä½ çš„ä»£ç  â†“

z = np.ones((5, 5))
z[1:-1, 1:-1] = 0
print(f"Q14:\n{z}")


# ============================================================
# Q15. ç»™ä¸€ä¸ªå·²æœ‰æ•°ç»„å¤–é¢åŠ ä¸€åœˆ 0ï¼ˆpaddingï¼‰(â˜…â˜†â˜†)
# ============================================================
# æç¤º: np.pad()
# ä½ çš„ä»£ç  â†“

z = np.ones((3, 3))
z = np.pad(z, pad_width=1, mode='constant', constant_values=0)
print(f"Q15:\n{z}")


# ============================================================
# Q16. ä»¥ä¸‹è¡¨è¾¾å¼çš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ(â˜…â˜†â˜†)
# ============================================================
# å°è¯•å…ˆè‡ªå·±åˆ¤æ–­ï¼Œå†è¿è¡ŒéªŒè¯

print(f"Q16:")
print(f"  0 * np.nan     = {0 * np.nan}")        # nan
print(f"  np.nan == np.nan = {np.nan == np.nan}")  # False!
print(f"  np.inf > np.nan = {np.inf > np.nan}")    # False
print(f"  np.nan - np.nan = {np.nan - np.nan}")    # nan
print(f"  np.nan in set([np.nan]) = {np.nan in set([np.nan])}")  # True
print(f"  0.3 == 3*0.1   = {0.3 == 3 * 0.1}")     # Falseï¼ˆæµ®ç‚¹ç²¾åº¦ï¼‰


# ============================================================
# Q17. åˆ›å»ºä¸€ä¸ª 5x5 çŸ©é˜µï¼Œå¯¹è§’çº¿ä¸‹æ–¹ä¸º 1,2,3,4 (â˜…â˜†â˜†)
# ============================================================
# æç¤º: np.diag()ï¼Œæ³¨æ„ k å‚æ•°æ§åˆ¶å¯¹è§’çº¿åç§»
# ä½ çš„ä»£ç  â†“

z = np.diag(1 + np.arange(4), k=-1)
print(f"Q17:\n{z}")


# ============================================================
# Q18. åˆ›å»ºä¸€ä¸ª 8x8 çš„æ£‹ç›˜çŸ©é˜µï¼ˆ0å’Œ1äº¤æ›¿ï¼‰(â˜…â˜†â˜†)
# ============================================================
# æç¤º: åˆ‡ç‰‡æ­¥é•¿èµ‹å€¼
# ä½ çš„ä»£ç  â†“

z = np.zeros((8, 8), dtype=int)
z[1::2, ::2] = 1   # å¥‡æ•°è¡Œçš„å¶æ•°åˆ—
z[::2, 1::2] = 1   # å¶æ•°è¡Œçš„å¥‡æ•°åˆ—
print(f"Q18:\n{z}")


# ============================================================
# Q19. å¯¹äºä¸€ä¸ª (6,7,8) å½¢çŠ¶çš„æ•°ç»„ï¼Œç¬¬100ä¸ªå…ƒç´ çš„ç´¢å¼•æ˜¯ï¼Ÿ(â˜…â˜†â˜†)
# ============================================================
# æç¤º: np.unravel_index()
# ä½ çš„ä»£ç  â†“

idx = np.unravel_index(99, (6, 7, 8))  # æ³¨æ„ç¬¬100ä¸ªå…ƒç´ çš„çº¿æ€§ç´¢å¼•æ˜¯99
print(f"Q19: ç¬¬100ä¸ªå…ƒç´ çš„ç´¢å¼• = {idx}")


# ============================================================
# Q20. ç”¨ tile å‡½æ•°åˆ›å»º 8x8 æ£‹ç›˜çŸ©é˜µ (â˜…â˜†â˜†)
# ============================================================
# æç¤º: np.tile() å¯ä»¥é‡å¤ä¸€ä¸ªå°çŸ©é˜µ
# ä½ çš„ä»£ç  â†“

tile = np.array([[0, 1],
                 [1, 0]])
z = np.tile(tile, (4, 4))
print(f"Q20:\n{z}")


# ============================================================
# ğŸ¯ è¯¾è¡¨éªŒè¯ï¼šç”¨ NumPy éªŒè¯ "çŸ©é˜µä¹˜æ³• = ç©ºé—´å˜æ¢"
# ============================================================
print("\n" + "=" * 50)
print("ğŸ¯ çŸ©é˜µä¹˜æ³• = ç©ºé—´å˜æ¢ éªŒè¯")
print("=" * 50)

# å®šä¹‰ä¸€ä¸ª 2D æ—‹è½¬çŸ©é˜µï¼ˆæ—‹è½¬90åº¦ï¼‰
theta = np.pi / 2  # 90åº¦
R = np.array([[np.cos(theta), -np.sin(theta)],
              [np.sin(theta),  np.cos(theta)]])
print(f"\næ—‹è½¬çŸ©é˜µ Rï¼ˆ90Â°ï¼‰:\n{np.round(R, 2)}")

# åŸå§‹å‘é‡
v = np.array([1, 0])  # æŒ‡å‘å³è¾¹çš„å•ä½å‘é‡

# çŸ©é˜µä¹˜æ³• = ç©ºé—´å˜æ¢
v_rotated = R @ v
print(f"åŸå§‹å‘é‡: {v}")
print(f"æ—‹è½¬å:   {np.round(v_rotated, 2)}")  # åº”è¯¥æŒ‡å‘ä¸Šæ–¹ [0, 1]

# éªŒè¯ï¼šè¿ç»­æ—‹è½¬ä¸¤æ¬¡ = æ—‹è½¬ 180åº¦
v_180 = R @ R @ v
print(f"æ—‹è½¬180Â°: {np.round(v_180, 2)}")  # åº”è¯¥æ˜¯ [-1, 0]

# éªŒè¯è¡Œåˆ—å¼ = é¢ç§¯ç¼©æ”¾
print(f"\næ—‹è½¬çŸ©é˜µçš„è¡Œåˆ—å¼: {np.linalg.det(R):.2f}")  # 1.0ï¼ˆæ—‹è½¬ä¸æ”¹å˜é¢ç§¯ï¼‰

# ç¼©æ”¾çŸ©é˜µ
S = np.array([[2, 0],
              [0, 3]])
print(f"\nç¼©æ”¾çŸ©é˜µ S:\n{S}")
print(f"ç¼©æ”¾åçš„å‘é‡: {S @ np.array([1, 1])}")  # [2, 3]
print(f"ç¼©æ”¾çŸ©é˜µçš„è¡Œåˆ—å¼: {np.linalg.det(S):.2f}")  # 6.0ï¼ˆé¢ç§¯æ”¾å¤§6å€ï¼‰

# ç»„åˆå˜æ¢ï¼šå…ˆç¼©æ”¾å†æ—‹è½¬
combined = R @ S  # æ³¨æ„ï¼šçŸ©é˜µä¹˜æ³•ä»å³å¾€å·¦è¯»
v_combined = combined @ np.array([1, 1])
print(f"\nå…ˆç¼©æ”¾å†æ—‹è½¬ [1,1]: {np.round(v_combined, 2)}")

print("\nâœ… å‰20é¢˜å®Œæˆï¼ä»Šå¤©ä¸Šåˆçš„è¡Œåˆ—å¼ã€é€†çŸ©é˜µã€éæ–¹é˜µã€ç‚¹ç§¯å…¨ç”¨ä¸Šäº†ã€‚")
